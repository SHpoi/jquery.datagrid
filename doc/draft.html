<!DOCTYPE html>
<html lang="en">
	<head>
	<meta charset="utf-8">
	<title>jQuery Datagrid Draft</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="jQuery Datagrid">
	<meta name="author" content="Creative Area">
	
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.string/2.3.0/underscore.string.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min.js"></script>
	
	<script type="text/javascript" src="../jquery.datagrid-draft.js"></script>
	<script type="text/javascript" src="../plugins/jquery.datagrid.bootstrap.js"></script>
	
	<script type="text/javascript">
	$( document ).ready( function() {

		var dgc = $( "#dg-country" ).datagrid({
			url: "data/ws_world.php",
			col: [{
				field: "Code",
				title: "Code",
				attrHeader: { "width": "10%" },
				attr: { "style": "text-align: center;" },
				sortable: true
			},{
				field: "Name",
				title: "Name",
				attrHeader: { "width": "30%" },
				sortable: true
			},{
				field: "Population",
				title: "Population",
				attrHeader: { "width": "20%", "style": "text-align: right;" },
				attr: { "style": "text-align: right;" },
				sortable: true,
				//render: function( value, rowdata, colindex ) {
				render: function( data ) {
					var r = "<span ";
					if ( +data.value == 0) {
						r += "class='label label-important'";
						data.value = "ZERO";
					} else if ( +data.value > 100000000 ) {
						this.css({
							"background-color": "#B94A48",
							"color": "white"
						});
					}
					r += ">"+data.value+"</span>";
					return r;
				}
			},{
				field: "SurfaceArea",
				title: "Surface",
				attrHeader: { "width": "20%", "style": "text-align: right;" },
				attr: { "style": "text-align: right;" },
				sortable: true
			},{
				field: "Continent",
				title: "Continent",
				attrHeader: { "width": "20%" },
				//render: "bootstrap-button",
				render: { "bootstrap-button" : {
					style: "info",
					//size: "small",
					icon: "plane"
				} },
				sortable: true
			}],
			onData: function( data ) {
				$("#dg-country-header").html( data.total + " countries" );
				return data;
			},
			//onSourceData: function( data ) {
			//	console.log(data);
			//	return data;
			//},
			attr: { "class": "table table-striped table-bordered table-condensed" },
			paramsMapping: { page: 'p', paging: 'pp', orderby: 'o', direction: 'd' },
			paramsDefault: { pp: 13 , p: 1 },
			sorter: "bootstrap", // "bootstrap-chevron", "bootstrap-arrow", "bootstrap-load"
			/*sorter: { "bootstrap": {
				"icons": "load"
			} },*/
			/*sorter: { "bootstrap": {
				"up": "minus",
				"down": "plus"
			} },*/
			/*sorter: function( ascendant ) {
				if (ascendant) {
					this.append( $('<i>', { "class": "icon-chevron-up", "style": "margin-left:5px;" } ) );
				} else {
					this.append( $('<i>', { "class": "icon-chevron-down", "style": "margin-left:5px;" } ) );
				}
			},*/
			//pager: "bootstrap",
			/*pager: { "bootstrap": {
				align: false, // false (left), "centered", "right"
				firstPage: "<i class='icon-fast-backward'>",
				prevPage: "<i class='icon-step-backward'>",
				nextPage: "<i class='icon-step-forward'>",
				lastPage: "<i class='icon-fast-forward'>"
			}},*/
			pager: { "bootstrap": {
				align: false, // false (left), "centered", "right"
				hideDisabled: false,
				//behavior: "sliding", // false (all), "sliding", "paging"
				behavior: { "sliding": { "pages": 3 } },
				firstPage: "&lt;&lt;",
				prevPage: "&lt;",
				nextPage: "&gt;",
				lastPage: "&gt;&gt;"
			}},
			//pagerPosition: [ "top", "bottom" ],
			noData: function() {
				return "no country";
			},
			onComplete: function() {
				//console.log( this.getPage() );
			}
		});
		$("#dg-country-filters").show();
		//dgc.addFilter( $("[name=Continent]") );
		dgc.addFilter( $("#dg-country-filters") );
	});
	</script>
	
	<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
	<link href="//netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet">
	
	<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
	<style>
	a { cursor: pointer;}
	.dg div span { cursor: pointer;}
	</style>
	</head>
	
	<body>
		<div class="navbar navbar-inverse navbar-static-top">
			<div class="navbar-inner">
				<div class="container">
					<a href="./" class="brand"><i class="icon-beaker"></i> jQuery DataGrid</a>
				</div>
			</div>
		</div>
		
		<div class="container">
			<div id="dg-test-header"></div>
			<div id="dg-test" style="display: none;"><a data-page="2">go page 2</a> - <a data-page="100">go page 100</a></div>
			<div id="dg-table" class="dg"></div>
			
			<div>MySql example : City</div>
			<div id="dg-country-header"></div>
			<div id="dg-country-filters" style="display: none;">
				<div>Filters:</div>
				<div class="row">
					<div class="span9">
						<div class="row">
							<div class="span1"><strong>Localisation</strong></div>
							<?php if ( true ) {?>
							<div class="span3">
								<select name="Continent">
									<option value=""> - All Continents -</option>
									<option value="Asia">Asia</option>
									<option value="Europe">Europe</option>
									<option value="North America">North America</option>
									<option value="Africa">Africa</option>
									<option value="Oceania">Oceania</option>
									<option value="Antarctica">Antarctica</option>
									<option value="South America">South America</option>
								</select>
							</div>
							<?php } ?>
							<div class="span5">
								<input type="checkbox" name="ContinentMulti[]" value="Asia"> Asia 
								<input type="checkbox" name="ContinentMulti[]" value="Europe"> Europe 
								<input type="checkbox" name="ContinentMulti[]" value="North America"> North America 
								<input type="checkbox" name="ContinentMulti[]" value="Africa"> Africa 
								<input type="checkbox" name="ContinentMulti[]" value="Oceania"> Oceania 
								<input type="checkbox" name="ContinentMulti[]" value="South America"> South America 
							</div>
						</div>
						<?php if ( true ) {?>
						<div class="row">
							<div class="span1"><strong>Population</strong></div>
							<div class="span3">
								<input type="checkbox" name="excludeZeroPopulation" value="yes"> Exclude countries with 0 population
							</div>
							<div class="span5">
								<input type="radio" name="PopulationInterval" value=""> All 
								<input type="radio" name="PopulationInterval" value="1"> &lt; 1M 
								<input type="radio" name="PopulationInterval" value="2"> &gt; 1M &amp; &lt; 100M 
								<input type="radio" name="PopulationInterval" value="3"> &gt; 100M 
							</div>
						</div>
						<?php } ?>
					</div>
					<div class="span3">
						<select name="SurfaceArea" multiple="multiple" size="3">
							<option value="1">&gt; 1 000 000</option>
							<option value="2">&gt; 100 000 &amp; &lt; 1 000 000</option>
							<option value="3">&lt; 100 000</option>
						</select>
					</div>
				</div>
			</div>
			<div id="dg-country" class="dg"></div>
		</div>
	</body>
</html>